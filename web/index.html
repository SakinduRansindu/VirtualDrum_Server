<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drum Player Configuration</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"> -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/eel.js"></script>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-semibold text-center mb-4">Drum Server Config</h1>
        <div class="px-8 pt-6 pb-8 mb-4">

            <div class="mb-4">
                <label for="ip" class="block text-gray-700 text-sm font-bold mb-2">Server IP:</label>
                <input type="text" id="ip" value="127.0.0.1" class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            </div>
            <div class="mb-6">
                <label for="port" class="block text-gray-700 text-sm font-bold mb-2">Server Port:</label>
                <input type="number" id="port" value="7075" class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            </div>
            <div class="mb-6">
                <label for="allowed-ip" class="block text-gray-700 text-sm font-bold mb-2">Allowed Ip:</label>
                <input type="text" id="allowed-ip" value="192.168.236.105" class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            </div>
            <div class="flex items-center justify-between">
                <button onclick="startServer()" id="startBtn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Start Server</button>
                <button onclick="stopServer()" id="stopBtn" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline hidden">Stop Server</button>
            </div>
            <div id="status" class="text-md font-semibold text-gray-800"></div>

        </div>
    </div>


    <script>
        let serverStatus = false;

        function startServer() {
            let ip = document.getElementById("ip").value;
            let port = parseInt(document.getElementById("port").value);
            let allowed_ip = document.getElementById("allowed-ip").value;
            eel.start_server(ip, port, allowed_ip);
        }

        function stopServer() {
            eel.stop_server();
        }

        eel.expose(updateMessage)
        function updateMessage(message) {
            document.getElementById("status").innerText = message;
        }

        eel.expose(updateServerRunningStatus)
        function updateServerRunningStatus(status) {
            serverStatus = status;
            if (serverStatus) {
                document.getElementById("startBtn").classList.add("hidden");
                document.getElementById("stopBtn").classList.remove("hidden");
            } else {
                document.getElementById("startBtn").classList.remove("hidden");
                document.getElementById("stopBtn").classList.add("hidden");
            }
        }
        
    </script>
</body>
</html>
